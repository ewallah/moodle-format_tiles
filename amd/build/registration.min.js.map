{"version":3,"sources":["../src/registration.js"],"names":["define","$","Notification","config","str","attemptRegistration","sesskey","serverUrl","data","useragent","navigator","userAgent","browserlanguages","languages","document","ready","ajax","url","type","crossDomain","contentType","JSON","stringify","dataType","success","status","get_strings","key","component","done","s","confirm","window","location","href","wwwroot","error","exception"],"mappings":"AA4BAA,OAAM,6BAAC,CAAC,QAAD,CAAW,mBAAX,CAAgC,aAAhC,CAA+C,UAA/C,CAAD,CAA6D,SAAUC,CAAV,CAAaC,CAAb,CAA2BC,CAA3B,CAAmCC,CAAnC,CAAwC,CACvG,aAEA,MAAO,CACHC,mBAAmB,CAAE,6BAASC,CAAT,CAAkBC,CAAlB,CAA6BC,CAA7B,CAAmC,CACpDA,CAAI,CAACC,SAAL,CAAiBC,SAAS,CAACC,SAA3B,CACAH,CAAI,CAACI,gBAAL,CAAwBF,SAAS,CAACG,SAAlC,CACAZ,CAAC,CAACa,QAAD,CAAD,CAAYC,KAAZ,CAAkB,UAAY,CAC1Bd,CAAC,CAACe,IAAF,CAAO,CACHC,GAAG,CAAEV,CADF,CAEHW,IAAI,CAAE,MAFH,CAGHC,WAAW,GAHR,CAIHC,WAAW,CAAE,kBAJV,CAKHZ,IAAI,CAAEa,IAAI,CAACC,SAAL,CAAed,CAAf,CALH,CAMHe,QAAQ,CAAE,MANP,CAOHC,OAAO,CAAE,iBAAShB,CAAT,CAAe,CACpB,GAAIA,CAAI,CAACiB,MAAT,CAAiB,CAQbrB,CAAG,CAACsB,WAAJ,CAPiB,CACb,CAACC,GAAG,CAAE,cAAN,CAAsBC,SAAS,CAAE,OAAjC,CADa,CAEb,CAACD,GAAG,CAAE,kBAAN,CAA0BC,SAAS,CAAE,cAArC,CAFa,CAGb,CAACD,GAAG,CAAE,yBAAN,CAAiCC,SAAS,CAAE,cAA5C,CAHa,CAIb,CAACD,GAAG,CAAE,IAAN,CAAYC,SAAS,CAAE,cAAvB,CAJa,CAKb,CAACD,GAAG,CAAE,QAAN,CALa,CAOjB,EAA4BE,IAA5B,CAAiC,SAAUC,CAAV,CAAa,CAC1C5B,CAAY,CAAC6B,OAAb,CACID,CAAC,CAAC,CAAD,CADL,CAEIA,CAAC,CAAC,CAAD,CAAD,CAAO,GAAP,CAAaA,CAAC,CAAC,CAAD,CAFlB,CAGIA,CAAC,CAAC,CAAD,CAHL,CAIIA,CAAC,CAAC,CAAD,CAJL,CAKI,UAAW,CACPE,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB/B,CAAM,CAACgC,OAAP,CACjB,wCADiB,CAC0B3B,CAAI,CAACmB,GAD/B,CACqC,WADrC,CACmDrB,CAC7E,CARL,CASI,UAAW,CACP0B,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB/B,CAAM,CAACgC,OAAP,CAAiB,gDAC3C,CAXL,CAaH,CAdD,CAeH,CACJ,CAhCE,CAiCHC,KAAK,CAAElC,CAAY,CAACmC,SAjCjB,CAAP,CAmCH,CApCD,CAqCH,CAzCE,CA4CV,CA/CK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript Module to help out if registration of pluign via curl fails.\n *\n * @module registration\n * @package course/format\n * @subpackage tiles\n * @copyright 2019 David Watson {@link http://evolutioncode.uk}\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since Moodle 3.3\n */\n\n/* eslint space-before-function-paren: 0 */\n\ndefine([\"jquery\", \"core/notification\", \"core/config\", \"core/str\"], function ($, Notification, config, str) {\n    \"use strict\";\n\n    return {\n        attemptRegistration: function(sesskey, serverUrl, data) {\n            data.useragent = navigator.userAgent;\n            data.browserlanguages = navigator.languages;\n            $(document).ready(function () {\n                $.ajax({\n                    url: serverUrl,\n                    type: 'POST',\n                    crossDomain: true,\n                    contentType: 'application/json',\n                    data: JSON.stringify(data),\n                    dataType: 'json',\n                    success: function(data) {\n                        if (data.status) {\n                            var stringKeys = [\n                                {key: \"registration\", component: \"admin\"},\n                                {key: \"registeredthanks\", component: \"format_tiles\"},\n                                {key: \"registerclicktocomplete\", component: \"format_tiles\"},\n                                {key: \"ok\", component: \"format_tiles\"},\n                                {key: \"cancel\"},\n                            ];\n                            str.get_strings(stringKeys).done(function (s) {\n                                Notification.confirm(\n                                    s[0],\n                                    s[1] + \" \" + s[2],\n                                    s[3],\n                                    s[4],\n                                    function() {\n                                        window.location.href = config.wwwroot\n                                            + '/course/format/tiles/register.php?key=' + data.key + \"&sesskey=\" + sesskey;\n                                    },\n                                    function() {\n                                        window.location.href = config.wwwroot + '/admin/settings.php?section=formatsettingtiles';\n                                    }\n                                );\n                            });\n                        }\n                    },\n                    error: Notification.exception\n                });\n            });\n        }\n    };\n\n});"],"file":"registration.min.js"}